var flashObj;function getSwf(){if(navigator.appName.indexOf("Microsoft")!=-1){flashObj=window.Cam4VChat;}else{flashObj=document.Cam4VChat;}if(typeof flashObj=="undefined"){setTimeout(getSwf,500);}}$j(document).ready(function(){getSwf();});function getFlashObject(){return document.getElementById("Cam4VChat");}function cam4RoomReady(){JsSender.isReady=true;}function cam4msg(b){var a=true;if(CURRENT_STATE=="viewer_accessDenied"||CURRENT_STATE=="viewer_requestingSpy"||CURRENT_STATE=="viewer_inSpy"){a=false;}if(JsSender.isReady&&a){flashObj.cam4msg(b);}}function cam4msgPrivate(c,b){var a=false;if(JsSender.isReady){a=flashObj.cam4msgPrivate(c,b);}if(!a){alert("We were unable to send your message to "+c);}return a;}function cam4IgnoreUser(a){if(JsSender.isReady){flashObj.cam4IgnoreUser(a);}}function cam4FullScreen(){if(JsSender.isReady){flashObj.cam4FullScreen();}}function getRoomUsers(){if(JsSender.isReady){return flashObj.getRoomUsers();}else{return null;}}function notifyFlashPlayer(a){if(JsSender.isReady){if(a=="addFriend"){return getFlashObject().addBroadcasterAsFriend();}else{if(a=="addFavorite"){return getFlashObject().addBroadcasterAsFavorite();}}}else{return null;}}var JsReceiver=JsReceiver||{};JsReceiver.roomWentOffline=function(){$j("#broadcastingApp").css({display:"none"});$j("#_profilePostroll").fadeIn(3000);if(Cam4User.isViewer()){ServiceTipViewer.stop();Overlays.closeAll();$j("#newTippingViewer").slideUp(200);}JsReceiver.setUnreadPrivateConversations(0);};var JsSender={isReady:false,closeNc:function(){if(JsSender.isReady){flashObj.closenc();try{tipping.go=false;}catch(a){}try{JsReceiver.pushStreamTimeTracking();}catch(a){}}}};Cam4Event.addEventListener(Cam4Event.WINDOW_ON_BEFORE_UNLOAD,function(){JsSender.closeNc();});Cam4User.cameraData=Cam4User.cameraData?Cam4User.cameraData:{};Cam4User.cameraData.lastResolutionTimeUpdate=new Date().getTime();Cam4User.cameraData.startedInHD=false;Cam4User.cameraData.startButtonClicked=false;Cam4User.cameraData.startBroadcastTime=null;var JsReceiver=JsReceiver?JsReceiver:{};JsReceiver.getFlashMovieObject=function(a){if(window[a]){return flashObj=window[a];}if(window.document[a]){return flashObj=window.document[a];}if(document[a]){return flashObj=document[a];}return flashObj=document.getElementById(a);};JsReceiver.cam4RoomReady=function(){JsSender.isReady=true;};JsReceiver.onBroadcasterDisconnect=function(){};JsReceiver.showLoginOverlay=function(){};JsReceiver.trackBroadcastTime=function(){if(typeof trackBroadcastTime!="undefined"){trackBroadcastTime();}};JsReceiver.pushStreamTimeTracking=function(){var a=new Date().getTime();var d=a-Cam4User.cameraData.lastResolutionTimeUpdate;var c="Viewer Time Tracking";var e="Normal";if(Cam4User.cameraData.canUseTranscoding==="true"){e=Cam4User.cameraData.resolutionStr==="SD"?"HD":"SD";}var b="Watch "+e+" Cams";if(Cam4User.isBroadcaster()){c="Broadcaster Time Tracking";b="Broadcast in "+e;}_gaq.push(["_trackTiming",c,b,d,Cam4User.userName,100]);Cam4User.cameraData.lastResolutionTimeUpdate=new Date().getTime();};JsReceiver.onStartBroadcast=function(a){try{ServiceWebSocket.connect();}catch(b){}Cam4User.cameraData.startButtonClicked=true;if(Cam4User.cameraData.canUseTranscoding==="true"&&a){Cam4User.cameraData.resolutionStr=a;dataLayer.push({event:"Broadcast",eventAction:a+" Broadcast",eventValue:Cam4User.userName});_gaq.push(["_trackEvent","Broadcast",a+" Broadcast",Cam4User.userName]);Preact.logEvent({name:"start_broadcast",extras:{resolution:a,sexPreference:preactUser.sexPreference}});if(a==="HD"){Cam4User.cameraData.startedInHD=true;}}else{dataLayer.push({event:"Broadcast",eventAction:"Normal Broadcast",eventValue:Cam4User.userName});Preact.logEvent({name:"start_broadcast",extras:{resolution:"normal",sexPreference:preactUser.sexPreference}});_gaq.push(["_trackEvent","Broadcast","Normal Broadcast",Cam4User.userName]);}JsReceiver.trackCameraState();Cam4User.cameraData.startBroadcastTime=new Date();};JsReceiver.onResolutionChangedByBroadcaster=function(a){if(a){Cam4User.cameraData.resolutionStr=a;if(Cam4User.isBroadcaster()){dataLayer.push({event:"Broadcast Resolution Change",eventAction:a+" Broadcast",eventValue:Cam4User.userName});_gaq.push(["_trackEvent","Broadcast Resolution Change",a+" Broadcast",Cam4User.userName]);}JsReceiver.pushStreamTimeTracking();}};JsReceiver.onResolutionChangedByViewer=function(a){if(a){Cam4User.cameraData.resolutionStr=a;dataLayer.push({event:"Viewer Switches Resolution",eventAction:"Watch "+a+" Broadcast",eventValue:Cam4User.performerName});_gaq.push(["_trackEvent","Viewer Switches Resolution","Watch "+a+" Broadcast",Cam4User.performerName]);JsReceiver.pushStreamTimeTracking();}};JsReceiver.playerData={};JsReceiver.onViewerLoadedStream=function(a){try{ServiceWebSocket.connect();}catch(b){}a=JSON.parse(a);Cam4User.cameraData.viewerStreamLoaded=true;if(a&&Cam4User.getIpSampler("ga_track_watch_broadcast")){JsReceiver.playerData.lastResolutionTimeUpdate=new Date().getTime();if(a.resolution){Cam4User.cameraData.resolutionStr=a.resolution;if(a.resolution==="HD"){Cam4User.cameraData.startedInHD=true;}}if(a.performerHDEnabled){dataLayer.push({event:"View Broadcast",eventAction:"Watch "+a.resolution+" Broadcast",eventValue:Cam4User.performerName});_gaq.push(["_trackEvent","View Broadcast","Watch "+a.resolution+" Broadcast",Cam4User.performerName]);}else{Cam4User.cameraData.resolutionStr="Normal";dataLayer.push({event:"View Broadcast",eventAction:"Watch Normal Broadcast",eventValue:Cam4User.performerName});_gaq.push(["_trackEvent","View Broadcast","Watch Normal Broadcast",Cam4User.performerName]);}}JsReceiver.trackCameraState();};JsReceiver.trackCameraState=function(){if(Cam4User.cameraData.canUseTranscoding==="true"){setTimeout(function(){var a=new Date().getTime();var d=a-Cam4User.cameraData.lastResolutionTimeUpdate;var c="Viewer Time Tracking";var f=Cam4User.cameraData.resolutionStr;var b="Watch "+f+" Cams";if(Cam4User.isBroadcaster()){c="Broadcaster Time Tracking";b="Broadcast in "+f;}var e=["_trackTiming",c,b,d,Cam4User.userName];if(Cam4User.isOnDevMachine()){e.push(100);}_gaq.push(e);Cam4User.cameraData.lastResolutionTimeUpdate=new Date().getTime();JsReceiver.trackCameraState();},60000);}};JsReceiver.onTippingLogsReceived=function(a){console.log(a);if(typeof AdminUtils!="undefined"){try{AdminUtils.parsePerformerTippingLogs(a);}catch(b){}}};JsReceiver.getTippingLogs=function(c,a){JsReceiver.tipLogs=TipFactory.getTippingLogs(c,a);try{flashObj.sendTippingLogs(JsReceiver.tipLogs);}catch(b){}return JsReceiver.tipLogs;};var GoogleTrackNewShow={viewer:Cam4User.userName,performer:Cam4User.performerName,getPersonas:function(){return GoogleTrackNewShow.performer+":"+GoogleTrackNewShow.viewer;},requestPrivateShow:function(){dataLayer.push({event:"Private Show",eventAction:"Request Private Show",eventValue:GoogleTrackNewShow.getPersonas()});var a=["_trackEvent","Private Show","Request Private Show",GoogleTrackNewShow.getPersonas()];console.log(a);_gaq.push(a);},startPrivateShowWithCam2Cam:function(){dataLayer.push({event:"Private Show",eventAction:"Start Private Show with C2C",eventValue:GoogleTrackNewShow.getPersonas()});var a=["_trackEvent","Private Show","Start Private Show with C2C",GoogleTrackNewShow.getPersonas()];console.log(a);_gaq.push(a);},startPrivateShow:function(){dataLayer.push({event:"Private Show",eventAction:"Start Private Show",eventValue:GoogleTrackNewShow.getPersonas()});var a=["_trackEvent","Private Show","Start Private Show",GoogleTrackNewShow.getPersonas()];console.log(a);_gaq.push(a);},requestCam2Cam:function(){dataLayer.push({event:"Private Show",eventAction:"Request C2C",eventValue:GoogleTrackNewShow.getPersonas()});var a=["_trackEvent","Private Show","Request C2C",GoogleTrackNewShow.getPersonas()];console.log(a);_gaq.push(a);},stopPrivateShow:function(){dataLayer.push({event:"Private Show",eventAction:"End Private Show",eventValue:GoogleTrackNewShow.getPersonas()});var a=["_trackEvent","Private Show","End Private Show",GoogleTrackNewShow.getPersonas()];console.log(a);_gaq.push(a);},acceptPrivateShowFromPop:function(a){if(a){GoogleTrackNewShow.viewer=a;}dataLayer.push({event:"Private Show",eventAction:"Accept Private Show from Pop",eventValue:GoogleTrackNewShow.getPersonas()});var b=["_trackEvent","Private Show","Accept Private Show from Pop",GoogleTrackNewShow.getPersonas()];console.log(b);_gaq.push(b);Preact.logEvent({name:"accept_private_show",extras:{sexPreference:preactUser.sexPreference}});},acceptCam2CamFromPop:function(a){if(a){GoogleTrackNewShow.viewer=a;}dataLayer.push({event:"Private Show",eventAction:"Accept Private Show with C2C from Pop",eventValue:GoogleTrackNewShow.getPersonas()});var b=["_trackEvent","Private Show","Accept Private Show with C2C from Pop",GoogleTrackNewShow.getPersonas()];console.log(b);_gaq.push(b);Preact.logEvent({name:"accept_cam_2_cam",extras:{sexPreference:preactUser.sexPreference}});},acceptPrivateShowFromTable:function(a){if(a){GoogleTrackNewShow.viewer=a;}dataLayer.push({event:"Private Show",eventAction:"Accept Private Show from Request Table",eventValue:GoogleTrackNewShow.getPersonas()});var b=["_trackEvent","Private Show","Accept Private Show from Request Table",GoogleTrackNewShow.getPersonas()];console.log(b);_gaq.push(b);Preact.logEvent({name:"accept_private_show",extras:{sexPreference:preactUser.sexPreference}});},acceptCam2CamFromTable:function(a){if(a){GoogleTrackNewShow.viewer=a;}dataLayer.push({event:"Private Show",eventAction:"Accept Private Show with C2C from Request Table",eventValue:GoogleTrackNewShow.getPersonas()});var b=["_trackEvent","Private Show","Accept Private Show with C2C from Request Table",GoogleTrackNewShow.getPersonas()];console.log(b);_gaq.push(b);Preact.logEvent({name:"accept_cam_2_cam",extras:{sexPreference:preactUser.sexPreference}});}};JsReceiver.isDocumentHidden=function(){return(document.hidden||document.mozHidden||document.msHidden||document.webkitHidden);};JsReceiver.setUnreadPrivateConversations=function(b){var c=document.title;var a=10;var d=/\([\d](.*?)\)/;if(c.match(d)){if(b>0){b=b<=a?b:a+"+";return document.title=c.replace(d,"("+b+")");}c=c.replace(d,"").trim();}if(b>0){b=b<=a?b:a+"+";return document.title="("+b+") "+c;}return document.title=c;};JsReceiver.setStealthModeValue=function(a){if(typeof Cam4User!="undefined"){Cam4User.stealthModeValue=a;return true;}return false;};var JSClient=JsReceiver;JsSender.WindowStat=new function(){var a=false;var c=0;var b=this;this.setFullWidthChat=function(d){if(!useResponsiveLayout){try{flashObj.setFullWidthChat(d);}catch(e){console.log("flashObj.setFullWidthChat(bool) not supported");}}};this.update=function(){var d=$j(window).width();if(d>=1000){if(!a){b.setFullWidthChat(true);}a=true;}else{if(a){b.setFullWidthChat(false);}a=false;}};this.loaded=function(){var d=$j(window).width();if(d>=1000){b.setFullWidthChat(true);}else{b.setFullWidthChat(false);}};};Cam4Event.addEventListener(Cam4Event.WINDOW_RESIZED,JsSender.WindowStat.update);$j(document).ready(function(){JsSender.WindowStat.loaded();});