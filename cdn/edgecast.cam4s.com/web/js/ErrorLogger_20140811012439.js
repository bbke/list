var ErrorLogger={testableObjects:[],settings:{currentCountry:"NOT_SET",currentCountryName:"NOT_SET",localeString:"NOT_SET",currentIp:"0.0.0.0",systemVar:0,server:"http://cs1849.mojohost.com",tippingUrl:"/ErrorLogger/WebLogger/TLogJs.php",prefix:{error:"error_",test:"failedTest_"},passed:[]},allowSending:function(){return true;},registerTest:function(d,f,c,b,e){var a=new Object();a.variableName=d;a.scriptSrc=f;a.fixedWith="Fixed_with__"+f;a.uid=c;a.testedInfo=b;a.onFix=e;ErrorLogger.testableObjects.push(a);return 0;},registerError:function(a){var b=new Object();b.uid=Utils.getCurrentPageNoArgs(document.URL);b.country=ErrorLogger.settings.currentCountryName;b=Utils.convertNative(a,b);Cam4Logs.debug("Error caught: "+Cam4Logs.stringify(a));if(ErrorLogger.allowSending()){ReportSender.sendReport(b,ErrorLogger.settings.prefix.error);}},init:function(){setTimeout(function(){ErrorLogger.checkObject(0);},200);},checkObject:function(index){var cItem;var statusTxt="fixed";if(index<ErrorLogger.testableObjects.length){cItem=ErrorLogger.testableObjects[index];try{var item=eval(cItem.variableName);if(typeof item=="undefined"){Utils.injectJavascript(cItem.scriptSrc,continueRun);}else{statusTxt="wasOk";continueRun();}}catch(err){Utils.injectJavascript(cItem.scriptSrc,continueRun);}}function continueRun(){ErrorLogger.checkObject(index+1);if(cItem.onFix){cItem.onFix(statusTxt,cItem);}Cam4Logs.logs+="failed test:\n";Cam4Logs.print(cItem);if(ErrorLogger.allowSending()){ReportSender.sendReport(cItem,ErrorLogger.settings.prefix.test);}}}};var ReportSender={caughted:[],loops:0,sendReport:function(e,d){if(ReportSender.loops<10){ReportSender.caughted.push(e);var c=new Date();var a=String(Utils.jsonData.encode(e));var b=BrowserDetect.browser+"_"+BrowserDetect.OS;ReportSender.loops++;}return ReportSender.loops;},onTippingFailed:function(){if(ErrorLogger.allowSending()){if(Cam4User.isBroadcaster()){var b=TipFactory.getTippingLogs("all");b=escape(encodeURIComponent(b));var c=ErrorLogger.settings.server+ErrorLogger.settings.tippingUrl;var a=c+"?uid="+Cam4User.userName+"&data="+b;Utils.injectJavascript(a);}}}};var Cam4UnitTest={currentTestsNames:[],showResult:function(){if(document.getElementById("qunit")){document.getElementById("qunit").style.display="block";document.getElementById("qunit").style.position="absolute";document.getElementById("qunit").style.top="0px";}},hideResult:function(){if(document.getElementById("qunit")){document.getElementById("qunit").style.display="none";}},init:function(b){Cam4UnitTest.currentTestsNames=b;this.prepareDom=function(){var c=(document.getElementsByTagName("body")[0]||document.body||document.documentElement);var d=document.createElement("div");var e=document.createElement("div");var f=document.createElement("div");e.setAttribute("id","qunit");f.setAttribute("id","qunit-fixture");d.appendChild(e);d.appendChild(f);c.appendChild(d);return 0;};var a=this;this.qunitCode="/js/unitTest/qunit-1.13.0_20140822112847.js";this.qunitLoader="/js/unitTest/qunit-loader_20141103022822.js";Utils.injectCss("/js/unitTest/qunit-1.13.0_20140414093541.css",function(){Utils.injectJavascript(a.qunitCode,function(){Utils.injectJavascript(a.qunitLoader,function(){a.prepareDom();});});});}};(function ErrorLogger_registerEvents(){ErrorLogger.registerTest("jQuery","http://ajax.googleapis.com/ajax/libs/jquery/1.4.2/jquery.min.js","JQUERY_FAILED_IN_"+Utils.getCurrentPageNoArgs(document.URL),"testJQuery_from_ErrorLogger_js",function(c,d){if(c=="fixed"){console.log("status is FIXED");var f=jQuery;var e=jQuery;jQuery("link").error(function(g){ErrorLogger.registerError(g);});jQuery("script").error(function(g){ErrorLogger.registerError(g);});jQuery("img").error(function(g){ErrorLogger.registerError(g);});jQuery(document).error(function(g){ErrorLogger.registerError(g);});jQuery(window).error(function(g){ErrorLogger.registerError(g);});}});window.onerror=function(e,d,c){var f=new Object;f.message=e;f.url=d;f.linenumber=c;f.caughtWith="windowOnError";ErrorLogger.registerError(f);};try{document.body.onerror=function(e,d,c){var f=new Object;f.message=e;f.url=d;f.linenumber=c;f.caughtWith="documentBodyOnError";ErrorLogger.registerError(f);};}catch(a){}if(window.addEventListener){window.addEventListener("error",function(c){var d=new Object;d.caughtWith="windowAddEventListenerError";d=Utils.convertNative(c,d);ErrorLogger.registerError(d);},false);}if(window.attachEvent){window.attachEvent("error",function(d){var c=new Object;c.caughtWith="windowAttachEventError";c=Utils.convertNative(d,c);ErrorLogger.registerError(c);},false);}try{document.addEventListener("error",function(d){var c=new Object;c.caughtWith="documentAddEventListenerError";c=Utils.convertNative(d,c);ErrorLogger.registerError(c);},false);}catch(b){}})();