if(typeof $j=="undefined"){$j=jQuery;}$j.fn.reverse=[].reverse;$j.fn.fadeTags=function(b){var a=0;if(b==false){return this.reverse().each(function(){$j(this).delay(a).fadeOut(200);a+=100;});}else{return this.each(function(){$j(this).delay(a).fadeIn(200);a+=100;});}};var SearchDirectory={tagsContainer:$j(".searchBar .tags, #directory .tags"),tagsMap:[],lastRemoved:-1,searchMap:[],searchBuffer:"",searchQuery:"",lastResult:null,debug:"",ajaxParams:{},dropdownLimit:5,countLimit:10000,animationId:null,globalCounter:0,globalHtmlCounter:0,initialLoad:true,cycleTimes:{id:0,timeouts:[]},lastQuery:null,servers:{results:"/directoryResults?",counts:"/directoryCounts?"},resultsSubmitMethod:1,delayCountOnUsername:5000,toggleValue:function(a){var c=$j(a).children("input:first"),d=c.val();if(d==""){c.val(c.attr("data-id"));}else{c.val("");}if($j(a).hasClass("subcategoryon")){this.removeTag($j(a));}else{this.generateTag($j(a).text(),$j(a),$j(a).prevAll(".category").attr("id"));}$j(a).toggleClass("subcategoryon");$j("span.counter").empty();var b=this.formatURL();this.getDirectoryCounts(b);},getUrl:function(a){var b=a.split(/(search\?page=\d+.)/);if(2 in b){return"&"+b[2];}return"";},formatURL:function(){if(this.initialLoad){this.initialLoad=false;}var a="",b="",c="";$j('#sform input[type!="button"]').each(function(){var d=$j(this).attr("name"),f=$j(this).val(),e=$j(this).attr("type");if(e=="checkbox"){}else{if(d!="undefined"){if(f!=""){a+="&"+d+"="+f;}}}});$j("#countries").find(".delimiter").prevAll(".toggleCheckLi").each(function(){b+=$j(this).find("input").val()+",";});$j("#languages").find(".delimiter").prevAll(".toggleCheckLi").each(function(){c+=$j(this).find("input").val()+",";});if(b!=""){b=b.substring(0,b.length-1);a+="&country="+b;}if(c!=""){c=c.substring(0,c.length-1);a+="&language="+c;}if(a.length>0&&a.charAt(0)=="&"){a=a.substring(1);}return a;},resetForm:function(a,b){if(this.isOldInternetExplorer()||(this.resultsSubmitMethod==3&&this.isFirefox(29))){window.location="/";return false;}Directory.disableCounts();this.resetCheckBoxLists();this.tagsMap=[];this.tagsContainer.find("span").trigger("click");this.tagsContainer.html("");this.resetQuery("#countries");this.resetQuery("#languages");DirectoryEvents.sortByContainer.find("#MOST_VIEWERS").trigger("click");$j('#directory input[type=hidden], #directory input[name="username"]').val("");if(!b){var c=$j('input[name="online"]');if(c.val()==""){c.trigger("click");}}this.lastQuery=this.formatURL();Directory.enableCounts();if(!a){this.getDirectoryHtml(1,false,true,false);}},countSelected:function(c){var a=0;$j("input[type=checkbox]:checked",$j(c)).each(function(){a++;});var b=$j("input[type=button]",$j(c).parent().parent());if(a>0){if($j(c).parent().attr("id")=="languages"){$j(b).val(a+" "+directoryInt.selectedLanguages);}else{$j(b).val(a+" "+directoryInt.selectedCountries);}}else{if($j(c).parent().attr("id")=="languages"){$j(b).val(directoryInt.selectLanguages);}else{$j(b).val(directoryInt.selectCountries);}}return a;},moveCheckBox:function(f,d){var a=$j(f).parent(),c=$j(a).parent(),b=$j("label",$j(a)).text();if(!d){$j(f).attr("checked",!$j(f).attr("checked"));}if($j(f).attr("checked")){var e=":checked";var g=$j(".delimiter",$j(c)).first();a.removeClass("checked");}else{var e=":not(:checked)";var g=$j("li",$j(c)).last();}$j("input[type=checkbox]"+e,$j(c)).each(function(){var h=$j("label",$j(this).parent()).text();if(h>b){g=$j(this).parent();return false;}});$j(g).before($j(a));this.countSelected(c);},resetCheckBoxLists:function(){$j("#countries").find(".delimiter").prevAll(".toggleCheckLi").trigger("click");$j("#languages").find(".delimiter").prevAll(".toggleCheckLi").trigger("click");},getDirectoryHtml:function(e,d,c,b){this.initialLoad=d;$j("span.counter").empty();var a=c?"&online=true&orderBy=MOST_VIEWERS":this.formatURL();if(b){a=b;}this.getDirectoryCounts(a);a="page="+e+"&"+a;if(window.history.pushState||(SearchDirectory.resultsSubmitMethod==3&&SearchDirectory.isFirefox(29))){if(SearchDirectory.isOldInternetExplorer()){if(!d){this.loadDirectoryHtml(a);}}else{if(!d){this.loadDirectoryHtml(a);}}}else{if(!d){window.location="/search?"+a;}}},loadDirectoryHtml:function(b){$j(".alertMessage").remove();this.ajaxParams.get_html=b;this.globalCounter++;function a(d){$j(window).trigger("resize");return function(f){if(d==SearchDirectory.globalCounter){if(f.html.toLowerCase().search("<html>")!=-1){window.location="/";}else{var e=(!/featured\/1$/.test(f.url))?f.url:"/";window.history.replaceState(null,directoryInt.search,e);SearchDirectory.lastResult=SearchDirectory.ajaxParams.get_html;var h=$j("#directoryHtml");if(DirectoryEvents.useInfiniteScroll){$j(".pager, .infinite-scroll-wrapper").remove();var j=$(f.html);h.append(j.filter("#directoryDiv").html());h.append(j.filter(".pager"));h.append(j.filter(".infinite-scroll-wrapper"));DirectoryEvents.bindInfiniteScroll();DirectoryEvents.useInfiniteScroll=false;}else{h.html(f.html);}document.title=f.title;Directory.resetBrokenImages();DirectoryEvents.replaceBrokenImages();var g=SearchDirectory.checkNoResults(h);if(g){h.html(g.html());}if(typeof showInitSignupOverlay=="function"){Directory.checkSignupOverlay();}DirectoryEvents.reloadAds();DirectoryEvents.simulatePageView();}}};}if(!DirectoryEvents.useInfiniteScroll){$j("#directoryHtml").html('<img class="directory-loader" src="'+WEB_CDN+'/images/loader.gif" />');}var c={url:SearchDirectory.servers.results+b,type:"get",success:a(SearchDirectory.globalCounter),error:function(d){console.log(d);}};if(SearchDirectory.resultsSubmitMethod==1){c.dataType="json";}$j.ajax(c);},getDirectoryCounts:function(b){if(!Directory.countsEnabled){return;}this.ajaxParams.get_counts=b;this.globalHtmlCounter++;this.startLoadingAnimation($j("#totalCountNumber"));function a(c){$j(window).trigger("resize");return function(d){if(c==SearchDirectory.globalHtmlCounter){if(d){SearchDirectory.stopLoadingAnimation();$j("#totalCountNumber").text(d.totalCount);$j("#totalCount").show();}}};}$j.ajax({url:SearchDirectory.servers.counts+b,dataType:"json",type:"post",success:a(SearchDirectory.globalHtmlCounter)});},orderBy:function(a){$j("#orderBy").val(a);SearchDirectory.lastQuery=SearchDirectory.formatURL();if(this.isOldInternetExplorer()||(this.resultsSubmitMethod==3&&this.isFirefox(29))){window.location="/search?"+SearchDirectory.formatURL();return false;}else{this.getDirectoryHtml(1,false,false,false);}$j("#searchOrderBy").find(".clicked").removeClass("clicked");$j("#"+a).addClass("clicked");},getExtensionFrom:function(a){a=a.split(".");return a[a.length-1];},searchInit:function(c){this.fixLayout();this.sortElements($j("#languages, #countries"));this.getDirectoryHtml(c,true,false,false);var a=SearchDirectory.checkNoResults($j("#directoryHtml"));if(a){$j("#directoryHtml").html(a.html());}$j(".subcategoryon").each(function(f){SearchDirectory.generateTag($j(this).text(),$j(this),$j(this).prevAll(".category:first").attr("id"));});$j("#countries .delimiter").prevAll(".toggleCheckLi").find('input[type="checkbox"]').each(function(f){SearchDirectory.generateTag($j(this).parent().find("label").text(),$j(this),"tags_countries");});$j("#languages .delimiter").prevAll(".toggleCheckLi").find('input[type="checkbox"]').each(function(f){SearchDirectory.generateTag($j(this).parent().find("label").text(),$j(this),"tags_language");});var d=$j("#usernameFilter"),b=d.val();if(b!=""){SearchDirectory.generateTag(b,d,"tags_username");}this.tagsContainer.find("li").fadeIn();this.tagsContainer.css("display","inline-block").find("ul").fadeTags();$j("#tags_bodytype").hide().nextUntil(".column-3").hide();$j(".toggleCheckLi").click(function(j){j.stopPropagation();var g=false;if($j(j.target).closest('input[type="checkbox"]').length>0){g=true;}var f=$j(this).parents("li.subcategoryoff").prevAll(".category").attr("id"),h=$j(this).find("input:checked").length;if(!h){if(f.indexOf("countries")!==-1){if($j("#countries").find(".delimiter").prevAll(".toggleCheckLi").length>=SearchDirectory.dropdownLimit){return false;}}else{if(f.indexOf("languages")!==-1){if($j("#languages").find(".delimiter").prevAll(".toggleCheckLi").length>=SearchDirectory.dropdownLimit){return false;}}}}SearchDirectory.generateTag($j("label",this).text(),$j("input",this),f);SearchDirectory.moveCheckBox($j("input",this),g);SearchDirectory.generateSearchMap("#"+f.replace("tags_",""));$j(this).removeClass("active");SearchDirectory.resetQuery($j("#"+f.replace("tags_","")));SearchDirectory.getDirectoryCounts(SearchDirectory.formatURL());});$j("#countriesButton, .dropdown_arrow_countries").click(function(f){f.stopPropagation();SearchDirectory.fixDropdownHeight();$j("#countriesButton").toggleClass("toggled");$j("#languagesButton").removeClass("toggled");$j("#countries").toggle();$j("#languages").hide();if(SearchDirectory.countSelected("#languages ul")==0){$j("#languagesButton").val(directoryInt.selectLanguages);SearchDirectory.resetQuery("#languages");}if($j("#countriesButton").hasClass("toggled")){SearchDirectory.generateSearchMap("#countries");}else{SearchDirectory.resetQuery("#countries");}if(SearchDirectory.countSelected("#countries ul")==0){$j("#countriesButton").val(directoryInt.selectCountries);SearchDirectory.resetQuery("#languages");}});$j("#languagesButton, .dropdown_arrow_languages").click(function(f){f.stopPropagation();SearchDirectory.fixDropdownHeight();$j("#languages").toggle();$j("#languagesButton").toggleClass("toggled");$j("#countriesButton").removeClass("toggled");$j("#countries").hide();if(SearchDirectory.countSelected("#countries ul")==0){$j("#countriesButton").val(directoryInt.selectCountries);SearchDirectory.resetQuery("#languages");}if($j("#languagesButton").hasClass("toggled")){SearchDirectory.generateSearchMap("#languages");}else{SearchDirectory.resetQuery("#languages");}if(SearchDirectory.countSelected("#languages ul")==0){$j("#languagesButton").val(directoryInt.selectLanguages);SearchDirectory.resetQuery("#languages");}});$j("#searchPanel").click(function(){if($j("#countriesButton").hasClass("toggled")){$j("#countriesButton").trigger("click");}if($j("#languagesButton").hasClass("toggled")){$j("#languagesButton").trigger("click");}});$j("#sform .submit").click(function(){if(SearchDirectory.isOldInternetExplorer()||(SearchDirectory.resultsSubmitMethod==3&&SearchDirectory.isFirefox(29))){window.location="/search?"+SearchDirectory.formatURL();return false;}else{$j("#searchPanel").trigger("click").hide();$j(".searchBar .filterDiv").removeClass("toggled");var f=$j("#usernameFilter"),e=f.val();if(e!=""){SearchDirectory.generateTag(e,f,"tags_username");}SearchDirectory.tagsContainer.find("li").fadeIn();SearchDirectory.tagsContainer.find("ul").fadeTags();SearchDirectory.lastQuery=SearchDirectory.formatURL();SearchDirectory.getDirectoryHtml(1,false,false,false);}});$j(".pager a").live("click",function(f){SearchDirectory.getDirectoryHtml($j(this).attr("data-page"),false,false,SearchDirectory.lastQuery);f.preventDefault();});$j(document).mouseup(function(h){var f=$j("#searchPanel"),g=$j(".filterDiv");if(SearchDirectory.is(g,h.target)){if(g.hasClass("toggled")){f.hide();g.removeClass("toggled");}else{f.show();g.addClass("toggled");}}else{if((!SearchDirectory.is(f,h.target)&&f.has(h.target).length===0)&&!SearchDirectory.is($j(".tags li span"),h.target)){$j("#searchPanel").trigger("click");f.hide();$j(".searchBar .filterDiv").removeClass("toggled");}}g=$j("#orderByButton");f=$j("#searchOrderBy");if(SearchDirectory.is(g,h.target)){if(g.hasClass("toggled")){f.hide();g.removeClass("toggled");}else{f.show();g.addClass("toggled");}}else{g.removeClass("toggled");f.hide();}});$j("#directoryHtml").delegate(".pager a","click",function(){$j(window).scrollTop(0);});this.cycleImages();this.countSelected($j("#countries ul").first());this.countSelected($j("#languages ul").first());this.initDropdownSearch();this.lastQuery=this.formatURL();this.bindDelayedCountOnUsername();},generateTag:function(e,b,d){if(b.attr("class")=="subcategoryoff no-hover"){return false;}var a=$j("<li></li>").text(e).append("<span>x</span>").hide();if(!this.tagsContainer.find("."+d).length){this.tagsContainer.append($j("<ul></ul>").hide().addClass(d));}if(this.isInTagsMap(b)===false){var c=this.getNextIndex();this.tagsMap[c]=b;this.tagsContainer.find("."+d).append(a);a.attr("data-key",c).find("span").click(function(f){if($j(b).attr("type")=="text"){$j(b).val("");SearchDirectory.removeTag(b);}else{if($j(b).is("input")){b=$j(b).parent(".toggleCheckLi");$j(b).trigger("click");}else{$j(b).trigger("click");}}if(typeof f.originalEvent!=="undefined"){$j("#sform .submit").trigger("click");}f.preventDefault();});return true;}else{this.removeTag(b);}return false;},removeTag:function(b){var c=this.isInTagsMap(b),a=this.tagsContainer.find('[data-key="'+c+'"]'),d=a.parent("ul").attr("class");delete this.tagsMap[c];a.remove();this.lastRemoved=c;this.tagsContainer.find("ul").each(function(f){if(!$j(this).find("li").length){$j(this).remove();}});return true;},isInTagsMap:function(b){for(var a in this.tagsMap){if(this.tagsMap[a][0]==b[0]){return a;}}return false;},getNextIndex:function(){return this.tagsMap.length;},initDropdownSearch:function(){$j(window).keydown(function(a){if(a.which==32){SearchDirectory.searchQuery+=" ";event.preventDefault();}});$j(document).keydown(function(e){if($j("#countries.dropdown").is(":visible")){var b=$j("#countriesButton"),d=$j("#countries");}else{if($j("#languages.dropdown").is(":visible")){var b=$j("#languagesButton"),d=$j("#languages");}}if($j("#countries.dropdown").is(":visible")||$j("#languages.dropdown").is(":visible")){if(e.which==27){b.trigger("click");}else{if(e.which==8){SearchDirectory.searchQuery=SearchDirectory.searchQuery.slice(0,-1);var c=SearchDirectory.searchFor(SearchDirectory.searchQuery,SearchDirectory.searchMap);if(c!="-1"){SearchDirectory.lastResult=c;}else{c=SearchDirectory.lastResult;}b.val(directoryInt.search+": "+SearchDirectory.searchQuery);var a=d.find(".delimiter").nextAll(".toggleCheckLi:eq("+c+")");d.find(".toggleCheckLi.checked").removeClass("active");a.addClass("active");a[0].parentNode.parentNode.scrollTop=a[0].offsetTop;SearchDirectory.lastResult=c!="-1"?c:0;e.preventDefault();}else{if(e.which==13){d.find(".active").removeClass("active").trigger("click");return false;}}}}else{if(e.which==13){$j(".buttons-container .submit").trigger("click");e.preventDefault();}}});$j(document).keypress(function(d){if(($j("#countries.dropdown").is(":visible")||$j("#languages.dropdown").is(":visible"))){if($j("#countries.dropdown").is(":visible")){var c=$j("#countriesButton");var g=$j("#countries");}else{var c=$j("#languagesButton");var g=$j("#languages");}SearchDirectory.searchBuffer=SearchDirectory.searchBuffer==""?c.val():SearchDirectory.searchBuffer;SearchDirectory.searchQuery+=String.fromCharCode(d.which).toLowerCase();c.val(directoryInt.search+": "+SearchDirectory.searchQuery);var e=SearchDirectory.searchFor(SearchDirectory.searchQuery,SearchDirectory.searchMap);if(e!="-1"){SearchDirectory.lastResult=e;}else{e=SearchDirectory.lastResult;}var b=g.find(".delimiter").nextAll(".toggleCheckLi:eq("+e+")"),f=0;g.find(".toggleCheckLi.active").removeClass("active");b.addClass("active");b[0].parentNode.parentNode.scrollTop=b[0].offsetTop+f;}});},generateSearchMap:function(a){SearchDirectory.searchMap=new Array();$j(a).find(".delimiter").nextAll(".toggleCheckLi").find("label").each(function(){SearchDirectory.searchMap.push($j(this).text().toLowerCase());});return SearchDirectory.searchMap;},resetQuery:function(a){$j(a)[0].scrollTop=0;this.searchQuery="";this.searchBuffer="";this.lastResult=null;return true;},urlToForm:function(){return History.getState().hash;},paramsToFilters:function(){var h=this.urlToForm(),g=[],e=$j("#sform");g=h.replace("/search?","").split("&");for(var c=0;c<g.length;c++){var a=g[c].split("="),b=a[0],f=a[1];if(b=="_suid"||b=="page"){continue;}if(b!="country"&&b!="language"){var d=e.find('[name="'+b+'"][value="'+f+'"]');}}return g;},searchFor:function(c,b){for(var a=0;a<b.length;a++){if(b[a].indexOf(c)==0){return a;}}return -1;},sortElements:function(a){a.each(function(){var c=$j(this).find(".delimiter").nextAll("li.toggleCheckLi").get(),d=c.sort(function(f,e){var h=$j(f).find("label").text().toLowerCase();var g=$j(e).find("label").text().toLowerCase();if(h>g){return 1;}if(h<g){return -1;}return 0;}),b=$j(this).find(".delimiter");b.nextAll("li.toggleCheckLi").remove();b.after(d);});},switchViews:function(){var a=$j("#tags_bodytype");if(a.css("display")=="none"){a.add(a.nextUntil(".column-3")).fadeTags();}else{a.nextUntil(".category").add(a).fadeTags(false);}},fixLayout:function(){var f=$j(".searchBar"),b=f.find(".filterDiv"),e=f.find("#orderByButton"),d=f.find(".buttons"),a=f.find(".hd-cams"),c=f.find(".tags");c.css("padding-left",parseInt(b.innerWidth())+20);c.css("padding-right",parseInt(e.innerWidth())+parseInt(a.innerWidth())+30);d.css("width",parseInt(e.innerWidth())+parseInt(a.innerWidth())+20);$j(window).resize(function(){$j("#main-content > div:eq(0)").css("min-height",parseInt($j("#directoryDiv").height())+40);});},fixDropdownHeight:function(){if($j(".buttons-container").height()>100){$j(".dropdown").height("98px");}},getActiveSort:function(){var a=$j("#searchOrderBy .clicked");return(a.length?a.attr("id"):false);},startLoadingAnimation:function(b){var a=0;if(this.animationId){this.stopLoadingAnimation();}$j(b).html(".");this.animationId=setInterval(function(){$j(b).append(".");if(++a==3){$j(b).html(".");a=0;}},500);},stopLoadingAnimation:function(){clearInterval(this.animationId);},cycleImages:function(){var b=SearchDirectory,a=$j("<img/>");$j("#directoryHtml").delegate(".profileDataBox a img","mouseenter",function(){var f=$j(this),g=f.attr("src"),e=f.attr("data-thumbs"),d=g.replace(/(\d+.jpg)/,"");if(e==""||(e.search(",")==-1)){return false;}var c=e.split(",");if(c.length!==0){c.splice(0,1);}b.cycleTimes.buffer={image:f,src:g,thumbs:c,thumbs_raw:e,url:d};if(!f.attr("data-first")){f.attr("data-first",g);}if(b.hasSnapshots(d)){b.cycleTimes.current=setTimeout(function(){b.cycleStep(d,c,f,a);},100);b.cycleTimes.timeouts.push(b.cycleTimes.current);}});$j("#directoryHtml").delegate(".profileDataBox a img","mouseleave",function(){b.cycleTimes.i=0;var d=$j(this),c=d.attr("data-thumbs");d.attr("data-loading",0);if(c==""||(c.search(",")==-1)){return false;}b.clearTimeouts(b.cycleTimes.current);d.attr("src",d.attr("data-first"));});a.error(function(){b.clearTimeouts(b.cycleTimes.current);b.cycleStep(b.cycleTimes.buffer.url,b.cycleTimes.buffer.thumbs,b.cycleTimes.buffer.image,a);}).load(function(){b.clearTimeouts(b.cycleTimes.current);if(b.cycleTimes.buffer.image.attr("data-loading")){b.cycleTimes.buffer.image.attr("src",$j(this).attr("src"));}b.cycleTimes.current=setTimeout(function(){b.cycleStep(b.cycleTimes.buffer.url,b.cycleTimes.buffer.thumbs,b.cycleTimes.buffer.image,a);},500);b.cycleTimes.timeouts.push(b.cycleTimes.current);});},cycleStep:function(c,a,e,d){e.attr("data-loading",1);this.cycleTimes.i=this.cycleTimes.i<a.length?this.cycleTimes.i:0;var b=a[this.cycleTimes.i++];if(e.attr("data-thumbs").search(b)!=-1){var f=c+b+".jpg";d.attr("src",f);}},is:function(b,a){return !!a&&(typeof a==="string"?$j.expr.match.POS.test(a)?$j(a,b.context).index(b[0])>=0:$j.filter(b,a).length>0:b.filter(a).length>0);},hasSnapshots:function(a){return a.indexOf("avatar")!==-1?true:false;},clearTimeouts:function(b){this.cycleTimes.timeouts.push(b);for(var a=0;a<this.cycleTimes.timeouts.length;a++){clearTimeout(this.cycleTimes.timeouts[a]);}this.cycleTimes.timeouts=[];},formatResultsNumber:function(a){return a.toString().replace(/(\d)(?=(\d{3})+$)/g,"$1 ");},checkNoResults:function(b){if(b.find(".profileBox").length==0){var a=$j("<div/>");a.html('<div class="no-results"><p>'+directoryInt.noResults+"</p></div>");return a;}return false;},isOldInternetExplorer:function(){return(navigator.appVersion.indexOf("MSIE 7.")!=-1)||(navigator.appVersion.indexOf("MSIE 8.")!=-1)||(navigator.appVersion.indexOf("MSIE 9.")!=-1);},isFirefox:function(a){return(navigator.userAgent.toLowerCase().indexOf("firefox/"+a)!=-1);},setResultsSubmitMethod:function(a){this.resultsSubmitMethod=a;},bindDelayedCountOnUsername:function(){var a,b=$j("#usernameFilter");b.keyup(function(){if($j(this).val().length>=4||$j(this).val().length==0){if(a){clearTimeout(a);}a=setTimeout(function(){SearchDirectory.getDirectoryCounts(SearchDirectory.formatURL());},SearchDirectory.delayCountOnUsername);}});b.focusout(function(){if(a){clearTimeout(a);}if($j(this).val().length>=4||$j(this).val().length==0){SearchDirectory.getDirectoryCounts(SearchDirectory.formatURL());}});}};var DirectoryEvents={directoryContainer:$j("#directorySavedSearches"),optionsWrapepr:$j(".optionsWrapper"),sortByContainer:$j(".sortByOptions"),sortByButton:$j(".sortByOptions .selectedSort"),toggleFiltersButton:$j("#toggleFilters"),filtersContainer:$j("#filters"),predefinedTabs:$j("[data-tab]"),deleteSearchButton:$j("#deleteSearch"),saveSearchButton:$j("#saveSearch"),deleteTabModal:$j(".deleteTab-modal-overlay"),savedSearches:$j("[data-search]"),replaceTabModal:$j(".replaceTabs-modal-overlay"),canSave:true,useInfiniteScroll:false,bindGlobalEvents:function(){$j(document).click(this.sortEvents);this.selectSortOption();this.toggleFiltersContainer();this.bindTabControls();this.bindInfiniteScroll();},bindInfiniteScroll:function(){$j(document).on("click",".infinite-scroll",function(a){DirectoryEvents.useInfiniteScroll=true;$j(".directory-next").trigger("click");a.preventDefault();});},sortEvents:function(b){var a=DirectoryEvents.sortByContainer.find(".activeSort");if($j(b.target).is(DirectoryEvents.sortByButton)){a.toggleClass("active");b.preventDefault();}else{a.removeClass("active");}},selectSortOption:function(){var a=this.sortByContainer.find(".activeSort li");a.on("click",function(b){var c=$j(this).find("a").attr("id");DirectoryEvents.sortByButton.text($j(this).text());a.removeClass("selected");$j(this).addClass("selected");if(!b.isTrigger){SearchDirectory.orderBy(c);}b.preventDefault();});},toggleFiltersContainer:function(){this.toggleFiltersButton.on("click",function(a){$j(this).toggleClass("active");DirectoryEvents.filtersContainer.toggle();a.preventDefault();});},initDropdownSearch:function(){$j(document).keydown(function(e){if(e.which==32&&($j("#countries.dropdown").is(":visible")||$j("#languages.dropdown").is(":visible"))){SearchDirectory.searchQuery+=" ";event.preventDefault();}if($j("#countries.dropdown").is(":visible")){var b=$j("#countriesButton"),d=$j("#countries");}else{if($j("#languages.dropdown").is(":visible")){var b=$j("#languagesButton"),d=$j("#languages");}}if($j("#countries.dropdown").is(":visible")||$j("#languages.dropdown").is(":visible")){if(e.which==27){b.trigger("click");}else{if(e.which==8){SearchDirectory.searchQuery=SearchDirectory.searchQuery.slice(0,-1);var c=SearchDirectory.searchFor(SearchDirectory.searchQuery,SearchDirectory.searchMap);if(c!="-1"){SearchDirectory.lastResult=c;}else{c=SearchDirectory.lastResult;}b.val(directoryInt.search+": "+SearchDirectory.searchQuery);var a=d.find(".delimiter").nextAll(".toggleCheckLi:eq("+c+")");d.find(".toggleCheckLi.checked").removeClass("active");a.addClass("active");a[0].parentNode.parentNode.scrollTop=a[0].offsetTop;SearchDirectory.lastResult=c!="-1"?c:0;e.preventDefault();}else{if(e.which==13){if(!window.Cam4MiniLoginOpened){d.find(".active").removeClass("active").trigger("click");return false;}}}}}else{if(e.which==13){if(!window.Cam4MiniLoginOpened){if(DirectoryEvents.filtersContainer.is(":visible")){$j(".controls .submit").trigger("click");e.preventDefault();}}}}});$j(document).keypress(function(d){if(($j("#countries.dropdown").is(":visible")||$j("#languages.dropdown").is(":visible"))){if($j("#countries.dropdown").is(":visible")){var c=$j("#countriesButton");var g=$j("#countries");}else{var c=$j("#languagesButton");var g=$j("#languages");}SearchDirectory.searchBuffer=SearchDirectory.searchBuffer==""?c.val():SearchDirectory.searchBuffer;SearchDirectory.searchQuery+=String.fromCharCode(d.which).toLowerCase();c.val(directoryInt.search+": "+SearchDirectory.searchQuery);var e=SearchDirectory.searchFor(SearchDirectory.searchQuery,SearchDirectory.searchMap);if(e!="-1"){SearchDirectory.lastResult=e;}else{e=SearchDirectory.lastResult;}var b=g.find(".delimiter").nextAll(".toggleCheckLi:eq("+e+")"),f=0;g.find(".toggleCheckLi.active").removeClass("active");b.addClass("active");b[0].parentNode.parentNode.scrollTop=b[0].offsetTop+f;}});$j(".gold-upgrade a").on("click",function(a){$j("#newSearch").remove();DirectoryEvents.hideTooManySearchesModal();openCheckoutMembership();a.preventDefault();});},replaceBrokenImages:function(){$j("#directoryHtml .profile-thumb").error(function(){if(Directory.globalBrokenSnapshots++<=Directory.brokenSnapshotsCapPerPage){Directory.replaceBrokenImages($j(this));}});},showTabControls:function(a){if(Directory.getTabDetails()=="NOT_DELETABLE"){DirectoryEvents.hideTabControls("save");DirectoryEvents.hideTabControls("delete");return true;}if(a=="search"){var b=Directory.savedSearches;if(!this.userCanSave()){DirectoryEvents.reportTooManySearches();return false;}}$j(".searchControls").css("display","inline-block").find("#"+a+"Search").show();},hideTabControls:function(a){$j(".searchControls").css("display","inline-block").find("#"+a+"Search").hide();},bindTabControls:function(){if(Directory.getTabDetails()&&Directory.userHasAccess()){this.showTabControls("delete");}else{if(!Directory.getTabDetails()&&Directory.userHasAccess()){this.showTabControls("save");}}this.deleteSearchButton.on("click",function(){var b=DirectoryEvents.deleteTabModal.find("h3 .tab-name"),c=DirectoryEvents.deleteTabModal,a=Directory.getTabDetails();b.text(a.title);if(a.type=="search"){$j(".modal-buttons + p").hide();}else{$j(".modal-buttons + p").show();}c.find(".confirm-button").one("click",function(){Directory.deleteTab();event.preventDefault();});c.find(".cancel-button").one("click",function(){c.hide();});c.show();event.preventDefault();});},bindSaveSearchEvents:function(){var a=$j("<li></li>").attr("id","newSearch").append('<input type="text" value="" />').find("input").prop("placeholder",directoryInt.nameYourSearch).end();DirectoryEvents.saveSearchButton.on("click",function(b){if(!Cam4User.isLoggedIn){activateOverlayItself("/gold?overlay=1&pageVersion=initSignup");return;}DirectoryEvents.directoryContainer.find("> ul").append(a).find("#newSearch input").focus().val("");a.on("keydown",function(c){if(c.which==13&&!DirectoryEvents.replaceTabModal.is(":visible")){Directory.saveCurrentSearch();}}).focusout(function(){if(!$j(".replaceTabs-modal .saved-searches").length){Directory.saveCurrentSearch();}});b.preventDefault();});},generateSavedSearches:function(){if($j(".savedSearchesWrapper").length){$j(".savedSearchesWrapper").remove();}var c=$j('<ul id="savedSearches"></ul>'),a=0;var b=Directory.getSavedSearches();b.success(function(e){if(e.length){for(a=0;a<e.length;a++){var d=$j('<li data-search="'+e[a].searchId+'"><a href="#"></a></li>').find("a").text(e[a].searchName).end();c.append(d);}$j("#newSearch").remove();$j("#directorySavedSearches ul").append('<li class="savedSearchesWrapper"></li>').find(".savedSearchesWrapper").append($j('<a href="#"></a>').text(e[0].searchName)).append(c);if(e.length>1){$j(".savedSearchesWrapper").addClass("multiple");}}});},toggleSearchesDropdown:function(){var a=".savedSearchesWrapper > a";$j(document).on("click",a,function(){Directory.cancelSaveSearch();if(Directory.savedSearches.length==1){$j("[data-search]:eq(0)").trigger("click");}else{$j(this).parent("li").toggleClass("active");}});$j(document).click(function(b){if(!$j(a).is(b.target)){$j(a).parent("li").removeClass("active");}});$j(document).on("click","[data-search]",function(){var c=$j(this).attr("data-search"),b=$j(this).text();$j("#directorySavedSearches .active").removeClass("active");$j(".savedSearchesWrapper > a").text(b).addClass("active");$j(this).find("a").addClass("active");DirectoryEvents.applySearchFilters(c);});},reportDuplicateSearch:function(){DirectoryEvents.showTooltip(directoryInt.duplicateSearchName,"error",false);},reportTooManySearches:function(){DirectoryEvents.removeTooltip(false);$j(".replaceTabs-modal .saved-searches").remove();var b=Directory.savedSearches,a=$j('<ul class="saved-searches"></ul>');i=0;for(i=0;i<b.length;i++){a.append($j("<li></li>").append($j('<a href="#"></a>').text(b[i].searchName).attr("data-searchId",b[i].searchId).click(function(e){DirectoryEvents.replaceTabModal.find(".active").removeClass("active");$j(this).addClass("active");e.preventDefault();})));}a.find("a:eq(0)").addClass("active");DirectoryEvents.replaceTabModal.find(".existing-searches p").append(a);DirectoryEvents.replaceTabModal.find(".existing-searches p span").text(Directory.getUserSearchLimit());var c=DirectoryEvents.replaceTabModal.find(".confirm-button"),d=DirectoryEvents.replaceTabModal.find(".cancel-button");c.one("click",function(g){var f=DirectoryEvents.replaceTabModal.find(".active");var h=Directory.deleteSearchQueryUrl.replace("%userid%",Cam4User.id).replace("%search_id%",f.attr("data-searchId"));var e=$j.ajax({type:"DELETE",url:h});e.success(function(){var k,j=SearchDirectory.formatURL();k=$j("#newSearch input").val();Directory.saveSearch(k,j);Directory.saveSearchRequest.success(function(){DirectoryEvents.showTooltip(directoryInt.searchSaved.replace("%searchname%",k),"success",true);DirectoryEvents.updateSavedSearches();DirectoryEvents.hideTooManySearchesModal();});});g.preventDefault();});d.one("click",function(e){$j("#newSearch").remove();DirectoryEvents.hideTooManySearchesModal();});DirectoryEvents.replaceTabModal.show();},hideTooManySearchesModal:function(){DirectoryEvents.replaceTabModal.find(".saved-searches").remove();DirectoryEvents.replaceTabModal.hide();},updateSavedSearches:function(){DirectoryEvents.generateSavedSearches();DirectoryEvents.hideTabControls("save");DirectoryEvents.showTabControls("delete");},applySearchFilters:function(b){var a=Directory.getSearch(b);SearchDirectory.resetForm(true,true);Directory.disableCounts();a.success(function(d){if("filters" in d){var f=d.filters;var c=$j("#directory input");$j.each(f,function(l,h){if(l=="username"){$j("#usernameFilter").val(Directory.formatUsername(h[0]));}else{var k=c.filter('input[name="'+l+'"]');if(k.length==0){var g=[];for(var j=0;j<h.length;j++){g.push('#directory input[name="'+h[j]+'"]');}k=$j(g.join(", "));}for(var j=0;j<h.length;j++){var m=k.filter('[data-id="'+h[j]+'"]');if(m.length==0){if(l=="country"||l=="language"){m=k.filter('[value="'+h[j]+'"]');}else{m=k.filter('[name="'+h[j]+'"]');}}m.parent(".subcategoryoff, .toggleCheckLi").filter(':not(".subcategoryon")').trigger("click");}}});}if("orderBy" in d){var e=d.orderBy;$j(".sortByOptions").find("#"+e).trigger("click");}Directory.isSavedSearchAction=true;Directory.enableCounts();$j("#sform .submit").trigger("click");Directory.isSavedSearchAction=false;DirectoryEvents.hideTabControls("save");DirectoryEvents.showTabControls("delete");});},showTooltip:function(d,c,b){DirectoryEvents.removeTooltip(false);var a=$j('<div class="searchTooltip"></div>');if(c=="error"){a.addClass("error");}else{a.addClass("success");}a.text(d);$j("#directorySavedSearches").append(a);if(b){setTimeout(function(){DirectoryEvents.removeTooltip(true);},3000);}},removeTooltip:function(b){var a=$j(".searchTooltip");if(a.length){if(b){a.fadeOut(500,function(){a.remove();});}else{a.remove();}}},reloadAds:function(){var c=$j("#subfoot iframe, .sponsorAd iframe, #headerBanner iframe");for(var b=0;b<c.length;b++){$j(c[b]).attr("src",Directory.formatAdsUrl($j(c[b]).attr("src")));}var d=Directory.getAdsParamsFrom(SearchDirectory.formatURL());if(typeof getXmlAds=="function"){$j("#cam4UltimateFooterAd").html("");function a(){var e=d.sexualPreference,f=d.gender;getXmlAds(e,f,Cam4Ultimate.footerAdServer,true);if($j("#cam4UltimateFooterAd .profile-box").length===0){setTimeout(a,1000);}}a();}},simulatePageView:function(){if(typeof _gaq=="object"){_gaq.push(["_trackPageview"]);}}};var Directory={tabsQueryUrl:"/directory/tabs/user_%userid%/tab_%tabid%",searchQueryUrl:"/directory/search/user_%userid%",deleteSearchQueryUrl:"/directory/search/user_%userid%/search_%search_id%",getSearchQueryUrl:"/directory/search/user_%userid%/search_%search_id%",savedSearches:[],lastUsernameValue:null,saveSearchRequest:{},getSearchesRequest:{},deleteSearchRequest:{},loggedInUserSearchLimit:3,goldUserSearchLimit:6,unlimitedSearchLimit:200,isSavedSearchAction:false,countsEnabled:true,brokenSnapshots:{},globalBrokenSnapshots:0,brokenSnapshotsCapPerPage:50,userHasAccess:function(){return !!Cam4User.isLoggedIn;},enableSearchesForResponsive:function(){return !useResponsiveLayout;},getSavedSearches:function(){var a=Directory.searchQueryUrl.replace("%userid%",Cam4User.id);this.getSearchesRequest=$j.ajax({type:"GET",url:a});this.getSearchesRequest.success(function(b){Directory.savedSearches=b;});return this.getSearchesRequest;},saveCurrentSearch:function(){var b,a=SearchDirectory.formatURL();b=$j("#newSearch input").val().trim();if(b.length==0){DirectoryEvents.showTooltip(directoryInt.searchNameEmpty,"error");}else{if(b.length>16){DirectoryEvents.showTooltip(directoryInt.searchNameTooLong,"error");}else{if(Directory.isDuplicateSearchSoftCheck(b)){DirectoryEvents.reportDuplicateSearch();}else{if(!Directory.userCanSave()){DirectoryEvents.reportTooManySearches();}else{if(DirectoryEvents.canSave){DirectoryEvents.canSave=false;this.saveSearch(b,a);Directory.saveSearchRequest.success(function(c){if(c.status_code=="SAVED_FAILED_DUPLICATE_NAME"){DirectoryEvents.reportDuplicateSearch();}else{if(c.status_code=="SAVED_FAILED_TOO_MANY_SAVED_SEARCHES"){DirectoryEvents.reportTooManySearches();}else{DirectoryEvents.showTooltip(directoryInt.searchSaved.replace("%searchname%",b),"success",true);DirectoryEvents.updateSavedSearches();}}DirectoryEvents.canSave=true;});}}}}}},cancelSaveSearch:function(){$j("#newSearch").remove();DirectoryEvents.removeTooltip();},saveSearch:function(e,d){var a=d,c=Directory.searchQueryUrl.replace("%userid%",Cam4User.id);var b=Directory.urlToArray(a);this.saveSearchRequest=$j.ajax({type:"POST",url:c,data:SearchDirectory.formatURL()+"&name_search="+e});},urlToArray:function(a){var d={};var f=a.substring(a.indexOf("?")+1).split("&");for(var b=0;b<f.length;b++){var g=f[b].split("="),c=decodeURIComponent(g[0]),e=decodeURIComponent(g[1]);if(c in d){d[c].push(e);}else{d[c]=[e];}}return d;},checkForDuplicateSearches:function(d,b,c){var a=0;for(a=0;a<d.length;a++){if(b==d[a][0]){return{position:a,where:"title"};}}for(a=0;a<d.length;a++){if(c==d[a][1]){return{position:a,where:"value"};}}return false;},deleteTab:function(){var a=Directory.getTabDetails();if(a){if(a.type=="search"){var b=Directory.deleteSearchQueryUrl.replace("%userid%",Cam4User.id).replace("%search_id%",a.id);}else{var b=this.tabsQueryUrl.replace("%userid%",Cam4User.id).replace("%tabid%",a.id);}this.deleteSearchRequest=$j.ajax({type:"DELETE",url:b});this.deleteSearchRequest.success(function(c){if(c.status_code=="OK"||c.status_code=="DELETED_OK"){DirectoryEvents.deleteTabModal.hide();a.element.remove();DirectoryEvents.hideTabControls("delete");DirectoryEvents.showTabControls("save");DirectoryEvents.showTooltip(directoryInt.tabDeleted.replace("%tabname%",a.title),true);}else{Directory.reportDeleteError();}});this.deleteSearchRequest.error(function(c){Directory.reportDeleteError();});}else{Directory.reportDeleteError();}},reportDeleteError:function(){DirectoryEvents.deleteTabModal.find(".confirm-button, p").hide();DirectoryEvents.deleteTabModal.find("h3").text(directoryInt.deleteTabError);},getTabDetails:function(){var a=DirectoryEvents.directoryContainer.find(".active").parent("li").not(".savedSearchesWrapper");if(!a.length){return 0;}else{if(a.data("deletable")==false){return"NOT_DELETABLE";}else{if(a.data("tab")){return{type:"tab",id:a.data("tab"),title:a.find(".active").text(),url:a.find(".active").attr("href"),element:a};}else{if(a.data("search")){return{type:"search",id:a.data("search"),title:a.find(".active").text(),url:a.find(".active").attr("href"),element:a};}else{return 0;}}}}},useNonAjaxSearch:function(){return SearchDirectory.isOldInternetExplorer()||(SearchDirectory.resultsSubmitMethod==3&&SearchDirectory.isFirefox(29));},getProfileImageUniqueClass:function(b){var a=b.attr("class"),c=a.replace("profile-thumb ","");return c;},removeArrayEmptyElements:function(c){var b=[];for(var a=0;a<c.length;a++){if(c[a]!=""){b.push(c[a]);}}return b;},resetBrokenImages:function(){this.brokenSnapshots={};},replaceBrokenImages:function(c){var d=this.getProfileImageUniqueClass(c);var j=c.attr("data-profile"),h=c.attr("data-thumbs"),b=c.attr("src");var a=this.removeArrayEmptyElements(h.split(",")),e=b.replace(/(\d+.jpg)/,""),k=SearchDirectory.getExtensionFrom(b);if(a.length!==0){a.splice(0,1);}var g=a.length;if(d in this.brokenSnapshots){this.brokenSnapshots[d].counter++;}else{this.brokenSnapshots[d]={counter:1,maxCycles:g};}if(g!==0&&SearchDirectory.hasSnapshots(b)&&this.brokenSnapshots[d].counter<=this.brokenSnapshots[d].maxCycles){for(var f=0;f<g;f++){c.attr("src",e+a[f]+"."+k);}}else{c.attr("src",j);}},bindEvents:function(c){DirectoryEvents.replaceBrokenImages();DirectoryEvents.bindGlobalEvents();$j(".subcategoryoff").on("click",function(){SearchDirectory.toggleValue($j(this));});SearchDirectory.sortElements($j("#languages, #countries"));SearchDirectory.getDirectoryHtml(c,true,false,false);var a=SearchDirectory.checkNoResults($j("#directoryHtml"));if(a){$j("#directoryHtml").html(a.html());}$j(".subcategoryon").each(function(f){SearchDirectory.generateTag($j(this).text(),$j(this),$j(this).prevAll(".category:first").attr("id"));});$j("#countries .delimiter").prevAll(".toggleCheckLi").find('input[type="checkbox"]').each(function(f){SearchDirectory.generateTag($j(this).parent().find("label").text(),$j(this),"tags_countries");});$j("#languages .delimiter").prevAll(".toggleCheckLi").find('input[type="checkbox"]').each(function(f){SearchDirectory.generateTag($j(this).parent().find("label").text(),$j(this),"tags_language");});var d=$j("#usernameFilter"),b=d.val();if(b!=""){SearchDirectory.generateTag(b,d,"tags_username");}SearchDirectory.tagsContainer.find("li").fadeIn();SearchDirectory.tagsContainer.find("ul").fadeTags();$j(".toggleCheckLi").click(function(j){j.stopPropagation();var g=false;if($j(j.target).closest('input[type="checkbox"]').length>0){g=true;}var f=$j(this).parents("li.subcategoryoff").prevAll(".category").attr("id"),h=$j(this).find("input:checked").length;if(!h){if(f.indexOf("countries")!==-1){if($j("#countries").find(".delimiter").prevAll(".toggleCheckLi").length>=SearchDirectory.dropdownLimit){return false;}}if(f.indexOf("languages")!==-1){if($j("#languages").find(".delimiter").prevAll(".toggleCheckLi").length>=SearchDirectory.dropdownLimit){return false;}}}SearchDirectory.generateTag($j("label",this).text(),$j("input",this),f);SearchDirectory.moveCheckBox($j("input",this),g);SearchDirectory.generateSearchMap("#"+f.replace("tags_",""));$j(this).removeClass("active");SearchDirectory.resetQuery($j("#"+f.replace("tags_","")));SearchDirectory.getDirectoryCounts(SearchDirectory.formatURL());});$j("#countriesButton, .dropdown_arrow_countries").click(function(f){f.stopPropagation();SearchDirectory.fixDropdownHeight();$j("#countriesButton").toggleClass("toggled");$j("#languagesButton").removeClass("toggled");$j("#countries").toggle();$j("#languages").hide();if(SearchDirectory.countSelected("#languages ul")==0){$j("#languagesButton").val(directoryInt.selectLanguages);SearchDirectory.resetQuery("#languages");}if($j("#countriesButton").hasClass("toggled")){SearchDirectory.generateSearchMap("#countries");}else{SearchDirectory.resetQuery("#countries");}if(SearchDirectory.countSelected("#countries ul")==0){$j("#countriesButton").val(directoryInt.selectCountries);SearchDirectory.resetQuery("#languages");}});$j("#languagesButton, .dropdown_arrow_languages").click(function(f){f.stopPropagation();SearchDirectory.fixDropdownHeight();$j("#languages").toggle();$j("#languagesButton").toggleClass("toggled");$j("#countriesButton").removeClass("toggled");$j("#countries").hide();if(SearchDirectory.countSelected("#countries ul")==0){$j("#countriesButton").val(directoryInt.selectCountries);SearchDirectory.resetQuery("#languages");}if($j("#languagesButton").hasClass("toggled")){SearchDirectory.generateSearchMap("#languages");}else{SearchDirectory.resetQuery("#languages");}if(SearchDirectory.countSelected("#languages ul")==0){$j("#languagesButton").val(directoryInt.selectLanguages);SearchDirectory.resetQuery("#languages");}});$j("#directory").click(function(){if($j("#countriesButton").hasClass("toggled")){$j("#countriesButton").trigger("click");}if($j("#languagesButton").hasClass("toggled")){$j("#languagesButton").trigger("click");}});$j("#sform .submit").click(function(e){if(Directory.useNonAjaxSearch()){window.location="/search?"+SearchDirectory.formatURL();return false;}else{if($j("#countries").is(":visible")){$j("#countriesButton").trigger("click");}if($j("#languages").is(":visible")){$j("#languagesButton").trigger("click");}if(!Directory.isSavedSearchAction){DirectoryEvents.directoryContainer.find(".active").removeClass("active");Directory.isSavedSearchAction=false;}if(!e.isTrigger){DirectoryEvents.toggleFiltersButton.trigger("click");}var g=$j("#usernameFilter"),f=g.val();if(f!=""){if(!Directory.lastUsernameValue){SearchDirectory.generateTag(f,g,"tags_username");}else{if(Directory.lastUsernameValue!=f){SearchDirectory.removeTag(g);SearchDirectory.generateTag(f,g,"tags_username");}}Directory.lastUsernameValue=f;}SearchDirectory.tagsContainer.find("li").show();SearchDirectory.tagsContainer.css("display","inline-block").find("ul").fadeTags();SearchDirectory.lastQuery=SearchDirectory.formatURL();SearchDirectory.getDirectoryHtml(1,false,false,false);Directory.cancelSaveSearch();DirectoryEvents.hideTabControls("delete");DirectoryEvents.showTabControls("save");}});$j(".pager a").live("click",function(f){SearchDirectory.getDirectoryHtml($j(this).attr("data-page"),false,false,SearchDirectory.lastQuery);f.preventDefault();});$j("#directoryHtml").delegate(".pager a","click",function(){if(!DirectoryEvents.useInfiniteScroll){$j(window).scrollTop(0);}});$j(".controls .reset").on("click",function(){SearchDirectory.resetForm();});SearchDirectory.cycleImages();SearchDirectory.countSelected($j("#countries ul").first());SearchDirectory.countSelected($j("#languages ul").first());DirectoryEvents.initDropdownSearch();SearchDirectory.lastQuery=SearchDirectory.formatURL();SearchDirectory.bindDelayedCountOnUsername();if(Directory.userHasAccess()&&Directory.enableSearchesForResponsive()){DirectoryEvents.bindSaveSearchEvents();DirectoryEvents.toggleSearchesDropdown();DirectoryEvents.generateSavedSearches();}Directory.toggleTabsDisplay();},toggleTabsDisplay:function(){$j(".tags").css("display",$j("[data-tab] .active, #directorySavedSearches li:first-child .active").length?"none":"inline-block");},getUserSearchLimit:function(){if((Cam4User.isPayingMember()&&Cam4User.useNewGoldFeatures)||(Cam4User.useUnbundling&&Cam4User.userFeatures.C4BND_UNLIMITED_SAVED_SEARCHES)){return this.unlimitedSearchLimit;}else{if(Cam4User.isPayingMember()){return this.goldUserSearchLimit;}}return this.loggedInUserSearchLimit;},isDuplicateSearchSoftCheck:function(a){var b=false;$j.each(Directory.savedSearches,function(d,c){if(c.searchName.toLowerCase()==a.toLowerCase()){b=true;return false;}});return b;},userCanSave:function(){return Directory.savedSearches.length<Directory.getUserSearchLimit();},getSearch:function(b){var c=Directory.getSearchQueryUrl.replace("%userid%",Cam4User.id).replace("%search_id%",b);var a=$j.ajax({url:c,type:"GET"});return a;},formatUsername:function(a){return a.replace(/"/g,"");},formatAdsUrl:function(d){var b=SearchDirectory.formatURL();var a=Directory.getAdsParamsFrom(b);var c=[];c.push("gender="+a.gender);c.push("category="+a.sexualPreference);c=c.join("&");return d.replace(/(\?)(.*)/,"?"+c);},checkSignupOverlay:function(){if(!Cam4User.useResponsiveLayout&&!Cam4User.isPayingMember()){var a=amt();var b=GetCookie("userWasLoggedIn");if(a>=5&&a<7&&b==null){activateOverlayItself("/gold?overlay=1&pageVersion=initSignup");detachRightSignupForm();}}},getAdsParamsFrom:function(a){var c=Directory.urlToArray(a),b={gender:"",sexualPreference:""},d={gender:"male",sexualPreference:"straight"};d.gender="gender" in c?c.gender[0]:b.gender;d.sexualPreference="sexPreference" in c?c.sexPreference[0]:b.sexualPreference;return d;},disableCounts:function(){this.countsEnabled=false;},enableCounts:function(){this.countsEnabled=true;}};